(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{130:function(e,t,a){},157:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/standard-one.3e8ef859.jpeg"},165:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/standard-two.4035dbf0.jpeg"},166:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/standard-three.2682eb5c.jpeg"},167:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/standard-four.734f97b0.jpeg"},168:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/luxe-one.5d2d5390.jpeg"},169:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/luxe-two.2f0d61bc.jpeg"},170:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/luxe-four.84add8ba.jpeg"},171:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/luxe-six.939ad6fb.jpeg"},172:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/luxe-seven.c04a8e3e.jpeg"},173:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/deluxe-one.47302810.jpeg"},174:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/deluxe-two.2b721e04.jpeg"},175:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/deluxe-three.c573a072.jpeg"},176:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/deluxe-four.36c2896a.jpeg"},177:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/deluxe-six.627e322e.jpeg"},178:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/deluxe-seven.efe8ea47.jpeg"},179:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/deluxe-eight.b1f2ec7f.jpeg"},180:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/deluxe-nine.17a0f963.jpeg"},181:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/deluxe-ten.2c5bd61a.jpeg"},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(19),r=a.n(s),i=(a(130),a(39)),l=a(15),o=a(8),u=a(82),d=a(17),j=a.n(d),b=(a(135),a(18)),O=function(e){return e.user.userData.userId},m=function(e){return e.user.userData.isAuthenticated},f=a(13),h=a(52),p=a.n(h),g=a(20),x={getReservations:Object(g.b)("calendar/getReservations"),getDisabledDates:Object(g.b)("calendar/getDisabledDates"),addReservation:Object(g.b)("calendar/addReservation"),deleteReservation:Object(g.b)("calendar/deleteReservation"),updateReservation:Object(g.b)("calendar/updateReservation"),updateReservationsCount:Object(g.b)("calendar/updateReservationsCount"),setEditedRange:Object(g.b)("calendar/setEditedRange"),setBookingRange:Object(g.b)("calendar/setBookingRange"),setGuests:Object(g.b)("calendar/setGuests"),setRange:Object(g.b)("calendar/setRange")},v={getData:Object(g.b)("snackbar/getData"),setIsOpened:Object(g.b)("snackbar/setIsOpened")},D=function(e){var t=e.userId,a=e.roomType,n=e.isAdmin;return function(e){p.a.get("/api/reservations",{params:{userId:t,roomType:a,isAdmin:n}}).then((function(t){e(x.getReservations(t.data))})).catch((function(t){e(v.getData({message:t.message,status:"error"})),e(v.setIsOpened(!0))}))}},k=function(e){return function(t){p.a.post("/api/reservations",Object(f.a)({},e)).then((function(a){t(x.addReservation(e)),t(x.updateReservationsCount(1)),t(v.getData({message:a.data.message,status:"success"})),t(v.setIsOpened(!0))})).catch((function(e){t(v.getData({message:e.message,status:"error"})),t(v.setIsOpened(!0))}))}},N=function(e){return function(t){p.a.delete("/api/reservations",{params:{id:e}}).then((function(a){t(x.deleteReservation(e)),t(x.updateReservationsCount(!1)),t(v.getData({message:a.data.message,status:"success"})),t(v.setIsOpened(!0))})).catch((function(e){t(v.getData({message:e.message,status:"error"})),t(v.setIsOpened(!0))}))}},y=function(e){return function(t){p.a.patch("/api/reservations",Object(f.a)({},e)).then((function(e){t(x.updateReservation(e.data)),t(v.getData({message:"\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e",status:"success"})),t(v.setIsOpened(!0))})).catch((function(e){t(v.getData({message:e.message,status:"error"})),t(v.setIsOpened(!0))}))}},S=function(e){return function(t){t(x.setEditedRange(e))}},R=function(e){return function(t){t(x.setBookingRange(e))}},I=function(e){return function(t){t(x.setGuests(e))}},w=function(e){var t=e.start,a=e.end;return function(e){e(x.setRange({start:t,end:a}))}},C=function(e){return e.calendar.calendarData.reservations},E=function(e){return e.calendar.calendarData.range},M=function(e){return e.calendar.calendarData.editedRange},Y=function(e){return e.calendar.calendarData.bookingRange},A=function(e){return e.calendar.calendarData.reservationsState},P=function(e){return e.calendar.calendarData.guests},L=a(251),T=a(245),W=a(237),z=a(246),B=(a(157),a(1)),_=function(){var e=Object(l.g)(),t=Object(l.h)().id,a=Object(n.useState)("/calendar/".concat(t)),c=Object(o.a)(a,2),s=c[0],r=c[1];return Object(B.jsxs)(L.a,{fullWidth:!0,className:"room-select-container",children:[Object(B.jsx)(T.a,{id:"room-select-label",children:"\u0422\u0438\u043f \u043a\u043e\u043c\u043d\u0430\u0442\u044b"}),Object(B.jsxs)(W.a,{labelId:"room-select-label",id:"room-type-select",value:s,label:"\u0422\u0438\u043f \u043a\u043e\u043c\u043d\u0430\u0442\u044b",onChange:function(t){r(t.target.value),e(t.target.value)},children:[Object(B.jsx)(z.a,{value:"/calendar/standard",children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442"}),Object(B.jsx)(z.a,{value:"/calendar/luxe",children:"\u041b\u044e\u043a\u0441"}),Object(B.jsx)(z.a,{value:"/calendar/deluxe",children:"\u0414\u0435\u043b\u044e\u043a\u0441"})]})]})},U=a(262),q=a(256),H=(a(159),function(e){var t=e.message,a=e.status;return function(e){e(v.getData({message:t,status:a}))}}),G=function(e){return function(t){t(v.setIsOpened(e))}},F=a(83),K=a(253),J=a(243),V=a(259),Q=a(260),X=a(261),Z=a(250),$=a(236),ee=a(238),te=a(3),ae=a(242),ne=a(257),ce=a(240),se=a(258),re=a(249),ie=(a(73),a(47)),le=a.n(ie),oe=(a(160),Object(b.b)((function(e){return{reservations:C(e)}}),(function(e){return{setEditedRange:function(t){return e(S(t))}}}))((function(e){var t=e.reservations,a=e.rangeDates,c=e.setEditedRange,s={from:null,to:null},r=Object(n.useState)(s),i=Object(o.a)(r,2),u=i[0],d=i[1],j=Object(n.useState)(null),b=Object(o.a)(j,2),O=b[0],m=b[1],f=Object(n.useState)(null),h=Object(o.a)(f,2),p=h[0],g=h[1],x=Object(n.useState)(null),v=Object(o.a)(x,2),D=v[0],k=v[1],N=Object(n.useState)(0),y=Object(o.a)(N,2),S=y[0],R=y[1],I=Object(n.useState)(!1),w=Object(o.a)(I,2),C=w[0],E=w[1],M={start:u.from,end:u.to},Y=Object(l.h)().id;Object(n.useEffect)((function(){switch(Y){case"standard":R(1);break;case"luxe":R(2);break;case"deluxe":R(3)}}),[Y]),Object(n.useEffect)((function(){var e=[];e.push({before:new Date});for(var n=function(n){t.filter((function(e){return e.start===t[n].start&&e.start!==a.from})).length>=S&&e.push(new Date(t[n].start),{after:new Date(t[n].start),before:new Date(t[n].end)})},c=0;c<t.length;c++)n(c);g(e),k(e)}),[t,a]),Object(n.useEffect)((function(){u.from&&k([{after:O,before:u.from}])}),[u,O]),Object(n.useEffect)((function(){k(p),c(u)}),[u.to]),Object(n.useEffect)((function(){E(!0)}),[D]);var A=function(){k(p)};return Object(B.jsx)("div",{className:"row",children:C?Object(B.jsx)(B.Fragment,{children:Object(B.jsx)(le.a,{mode:"range",numberOfMonths:2,fromMonth:new Date,disabledDays:null!==D?D:p,selectedDays:u,modifiers:M,onDayClick:function(e,t){if(t.disabled)A();else{d(s);for(var a=0;a<D.length;a++)D[a]>e&&m(D[a]);var n=ie.DateUtils.addDayToRange(e,u);null!==u.from&&null!==u.to||d(n)}}})}):Object(B.jsx)("div",{children:"Loading..."})})}))),ue=Object(b.b)((function(e){return{reservations:C(e),range:E(e),editedRange:M(e)}}),(function(e){return{updateReservation:function(t){return e(y(t))},deleteReservation:function(t){return e(N(t))}}}))((function(e){var t=e.editedReservation,a=e.setModalState,c=e.updateReservation,s=e.editedRange,r=e.deleteReservation,i=Object(n.useState)({}),l=Object(o.a)(i,2),u=l[0],d=l[1],b=Object(n.useState)({from:null,to:null}),O=Object(o.a)(b,2),m=O[0],h=O[1];Object(n.useEffect)((function(){d(t[0])}),[t]),Object(n.useEffect)((function(){h({from:u.start,to:u.end})}),[u]),Object(n.useEffect)((function(){null!==s.from&&d(Object(f.a)(Object(f.a)({},u),{},{start:j()(s.from).utc(0).format("YYYY-MM-DD"),end:j()(s.to).utc(0).format("YYYY-MM-DD")}))}),[s]);var p=function(e){"name"===e.target.name?d(Object(f.a)(Object(f.a)({},u),{},{name:e.target.value,title:e.target.value})):d(Object(f.a)(Object(f.a)({},u),{},Object(te.a)({},e.target.name,e.target.value)))};return Object(B.jsxs)(q.a,{className:"reservation-edit-form",children:[Object(B.jsx)(F.a,{variant:"h5",component:"h5",sx:{marginBottom:"20px"},children:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0440\u0435\u0437\u0435\u0440\u0432\u0430\u0446\u0438\u0438"}),Object(B.jsx)(oe,{rangeDates:m}),Object(B.jsx)(ae.a,{required:!0,id:"name",label:"\u0418\u043c\u044f \u0433\u043e\u0441\u0442\u044f",name:"name",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0433\u043e\u0441\u0442\u044f",onChange:p,value:u.name,fullWidth:!0,margin:"normal",size:"small",InputLabelProps:{shrink:!0}}),Object(B.jsx)(ae.a,{required:!0,id:"email",label:"Email",name:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u044d\u043c\u0435\u0439\u043b",onChange:p,value:u.email,type:"email",fullWidth:!0,margin:"normal",size:"small",InputLabelProps:{shrink:!0}}),Object(B.jsx)(ae.a,{required:!0,id:"phone",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",name:"phone",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d",onChange:p,value:u.phone,fullWidth:!0,margin:"normal",size:"small",InputLabelProps:{shrink:!0}}),Object(B.jsx)(ae.a,{id:"details",label:"\u0414\u0435\u0442\u0430\u043b\u0438",name:"descr",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0435\u0442\u0430\u043b\u0438 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",onChange:p,value:u.descr,fullWidth:!0,margin:"normal",size:"small",multiline:!0,minRows:4,InputLabelProps:{shrink:!0}}),Object(B.jsxs)(q.a,{className:"price-and-payment",children:[Object(B.jsx)(ae.a,{required:!0,id:"price",label:"\u0426\u0435\u043d\u0430 \u0437\u0430 \u043d\u043e\u0447\u044c",name:"roomPrice",placeholder:"1300",onChange:p,value:u.roomPrice,type:"number",margin:"normal",size:"small",InputLabelProps:{shrink:!0}}),Object(B.jsx)(ne.a,{className:"prepayment-checkbox",control:Object(B.jsx)(ce.a,{name:"paymentStatus",onChange:p}),label:"\u041f\u0440\u0435\u0434\u043e\u043f\u043b\u0430\u0442\u0430"})]}),Object(B.jsxs)(se.a,{className:"card-actions",children:[Object(B.jsx)(re.a,{variant:"text",onClick:function(){r(u._id),a(!1)},color:"error",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(B.jsx)(re.a,{variant:"contained",onClick:function(){c(u),a(!1)},children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})]})]})})),de=Object(b.b)((function(e){return{reservations:C(e),range:E(e)}}),null)((function(e){var t=e.range,a=e.reservations,c=Object(n.useState)(!1),s=Object(o.a)(c,2),r=s[0],i=s[1],l=function(){return i(!1)},u=Object(n.useState)(null),d=Object(o.a)(u,2),b=d[0],O=d[1],m=a.filter((function(e){return j()(t.start).isBetween(j()(e.start),j()(e.end),void 0,"[)")}));return Object(B.jsxs)("div",{className:"reservations-for-date",children:[0!==m.length&&Object(B.jsx)(F.a,{variant:"h6",component:"h6",children:"\u0420\u0435\u0437\u0435\u0440\u0432\u0430\u0446\u0438\u0438"}),0!==m.length&&Object(B.jsx)(K.a,{className:"reservations-list",children:m.map((function(e,t){return Object(B.jsxs)(J.a,{className:"reservations-list-item",secondaryAction:Object(B.jsx)(V.a,{edge:"end","aria-label":"edit",color:"primary",onClick:function(){return function(e){var t=a.filter((function(t){return t._id===e}));O(t),i(!0)}(e._id)},children:Object(B.jsx)(Q.a,{children:"edit"})}),children:[Object(B.jsx)(X.a,{children:Object(B.jsx)(Z.a,{children:Object(B.jsx)(Q.a,{children:"person"})})}),Object(B.jsx)($.a,{primary:e.title,secondary:"".concat(j()(e.start).format("DD.MM.YY")," - ").concat(j()(e.end).format("DD.MM.YY"))})]},t)}))}),Object(B.jsx)(ee.a,{open:r,onClose:l,children:Object(B.jsxs)(q.a,{className:"modal-content",children:[Object(B.jsx)(V.a,{className:"close","aria-label":"close",onClick:l,children:Object(B.jsx)(Q.a,{children:"close"})}),Object(B.jsx)(ue,{editedReservation:b,setModalState:i})]})})]})})),je=Object(b.b)((function(e){return{reservations:C(e),range:E(e),userId:O(e)}}),(function(e){return{addReservation:function(t){return e(k(t))}}}))((function(e){var t=e.addReservation,a=e.range,c=e.userId,s=e.roomType,r=e.roomPrice,i=Object(n.useState)({name:"",email:"",descr:"",phone:"",start:null,end:null,title:"",owner:c,roomType:s,roomPrice:r,paymentStatus:!1}),l=Object(o.a)(i,2),u=l[0],d=l[1],b=Object(n.useState)(!1),O=Object(o.a)(b,2),m=O[0],h=O[1];Object(n.useEffect)((function(){d(Object(f.a)(Object(f.a)({},u),{},{start:a.start,end:a.end}))}),[a]);var p=function(){return h(!1)},g=function(e){"name"===e.target.name?d(Object(f.a)(Object(f.a)({},u),{},{name:e.target.value,title:e.target.value})):d(Object(f.a)(Object(f.a)({},u),{},Object(te.a)({},e.target.name,e.target.value))),"paymentStatus"===e.target.name&&d(Object(f.a)(Object(f.a)({},u),{},{paymentStatus:e.target.checked}))};return Object(B.jsxs)("div",{className:"add-reservation-container",children:[Object(B.jsx)(F.a,{variant:"h6",component:"h6",sx:{marginBottom:"6px"},children:"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u0442\u044b"}),Object(B.jsx)(F.a,{variant:"p",component:"p",sx:{marginBottom:"20px"},className:"secondary-descr",children:"".concat(j()(a.start).format("DD.MM.YY")," - ").concat(j()(a.end).format("DD.MM.YY"))}),Object(B.jsx)(re.a,{fullWidth:!0,onClick:function(){h(!0)},variant:"contained",endIcon:Object(B.jsx)(Q.a,{children:"add"}),children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0431\u0440\u043e\u043d\u044c"}),Object(B.jsx)(ee.a,{open:m,onClose:p,children:Object(B.jsxs)(q.a,{className:"modal-content",children:[Object(B.jsx)(V.a,{className:"close","aria-label":"close",onClick:p,children:Object(B.jsx)(Q.a,{children:"close"})}),Object(B.jsxs)(F.a,{variant:"p",component:"p",className:"secondary-descr",sx:{marginBottom:"20px"},children:["\u041d\u0430 \u0434\u0430\u0442\u044b"," ","".concat(j()(a.start).format("DD.MM.YY")," - ").concat(j()(a.end).format("DD.MM.YY"))]}),Object(B.jsxs)(q.a,{className:"reservation-edit-form",children:[Object(B.jsx)(ae.a,{required:!0,id:"name",label:"\u0418\u043c\u044f \u0433\u043e\u0441\u0442\u044f",name:"name",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0433\u043e\u0441\u0442\u044f",onChange:g,value:u.name,fullWidth:!0,margin:"normal",size:"small",InputLabelProps:{shrink:!0}}),Object(B.jsx)(ae.a,{required:!0,id:"email",label:"Email",name:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u044d\u043c\u0435\u0439\u043b",onChange:g,value:u.email,type:"email",fullWidth:!0,margin:"normal",size:"small",InputLabelProps:{shrink:!0}}),Object(B.jsx)(ae.a,{required:!0,id:"phone",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",name:"phone",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d",onChange:g,value:u.phone,fullWidth:!0,margin:"normal",size:"small",InputLabelProps:{shrink:!0}}),Object(B.jsx)(ae.a,{id:"details",label:"\u0414\u0435\u0442\u0430\u043b\u0438",name:"descr",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0435\u0442\u0430\u043b\u0438 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",onChange:g,value:u.descr,fullWidth:!0,margin:"normal",size:"small",multiline:!0,minRows:4,InputLabelProps:{shrink:!0}}),Object(B.jsxs)(q.a,{className:"price-and-payment",children:[Object(B.jsx)(ae.a,{required:!0,id:"price",label:"\u0426\u0435\u043d\u0430 \u0437\u0430 \u043d\u043e\u0447\u044c",name:"roomPrice",placeholder:"1300",onChange:g,value:u.roomPrice,type:"number",margin:"normal",size:"small",InputLabelProps:{shrink:!0}}),Object(B.jsx)(ne.a,{className:"prepayment-checkbox",control:Object(B.jsx)(ce.a,{name:"paymentStatus",onChange:g}),label:"\u041f\u0440\u0435\u0434\u043e\u043f\u043b\u0430\u0442\u0430"})]}),Object(B.jsxs)(se.a,{className:"card-actions",children:[Object(B.jsx)("div",{}),Object(B.jsx)(re.a,{variant:"contained",onClick:function(){t(u),h(!1)},children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})]})]})]})})]})}));a(161);var be=Object(b.b)((function(e){return{reservations:C(e),userId:O(e),range:E(e),reservationsState:A(e)}}),(function(e){return{getReservations:function(t){return e(D(t))},setRange:function(t){return e(w(t))},snackbarRun:function(t){return e(H(t))},setIsOpened:function(t){return e(G(t))}}}))((function(e){var t=e.userId,a=e.getReservations,c=e.reservations,s=e.setRange,r=e.range,i=e.reservationsState,d=Object(l.h)().id,b=Object(u.c)(j.a),O=Object(n.useState)(0),m=Object(o.a)(O,2),f=m[0],h=m[1],p=Object(n.useState)(0),g=Object(o.a)(p,2),x=(g[0],g[1]);Object(n.useEffect)((function(){switch(a({userId:t,roomType:d,isAdmin:!0}),d){case"standard":x(1),h(1100);break;case"luxe":x(2),h(1300);break;case"deluxe":x(3),h(1400)}}),[i,d,t,a]);var v=function(e){var t=e.start,a=e.end,n=new Date;if(n.setHours(0,0,0,0),t<n)return!1;s({start:t,end:a})};return Object(B.jsxs)(U.a,{children:[Object(B.jsxs)(q.a,{className:"calendar-top-block",children:[Object(B.jsx)("h1",{children:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c"}),Object(B.jsx)(_,{})]}),Object(B.jsxs)("div",{className:"calendar-grid",children:[Object(B.jsx)(u.a,{style:{height:"700px"},selectable:!0,localizer:b,events:c,defaultView:u.b.MONTH,onSelectEvent:v,onSelectSlot:v,eventPropGetter:function(e){var t="#1976d2";return!1===e.paymentStatus&&(t="#eb0000"),{style:{backgroundColor:t}}},dayPropGetter:function(e){var t,a=new Date;return a.setHours(0,0,0,0),e>a&&e!==a&&(t="white"),e<a&&(t="#e5e5e5"),{style:{backgroundColor:t}}}}),Object(B.jsx)("div",{className:"calendar-sidebar",children:null!==r&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(de,{}),Object(B.jsx)(je,{roomPrice:f,roomType:d})]})})]})]})})),Oe=function(){return Object(B.jsxs)(U.a,{children:[Object(B.jsx)(q.a,{children:Object(B.jsx)("h1",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u043a\u043e\u043c\u043d\u0430\u0442\u044b"})}),Object(B.jsx)(_,{})]})},me={setIsAuthenticated:Object(g.b)("auth/setIsAuthenticated"),setUserId:Object(g.b)("auth/setUserId")},fe=function(e){return function(t){t(me.setIsAuthenticated(e))}},he=function(e){return function(t){t(me.setUserId(e))}},pe="User data",ge=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(null),r=Object(o.a)(s,2),i=r[0],l=r[1],u=Object(n.useCallback)((function(e,t){c(e),l(t),localStorage.setItem(pe,JSON.stringify({userId:t,token:e}))}),[]),d=Object(n.useCallback)((function(){c(null),l(null),localStorage.removeItem(pe)}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem(pe));e&&e.token&&u(e.token,e.userId)}),[u]),{login:u,logout:d,token:a,userId:i}},xe=(a(162),a(263)),ve=a(264),De=a(265),ke=Object(b.b)(null,(function(e){return{setIsAuthenticated:function(){return e(fe(!0))},setUserId:function(t){return e(he(t))},snackbarRun:function(t){return e(H(t))},setIsOpened:function(t){return e(G(t))}}}))((function(e){var t=e.setIsAuthenticated,a=e.setUserId,c=e.snackbarRun,s=e.setIsOpened,r=Object(n.useState)({email:"",password:""}),i=Object(o.a)(r,2),l=i[0],u=i[1],d=Object(n.useState)(!1),j=Object(o.a)(d,2),b=j[0],O=j[1],m=window.location.pathname,h=ge().login,g=function(e){u(Object(f.a)(Object(f.a)({},l),{},Object(te.a)({},e.target.name,e.target.value)))};return Object(B.jsx)(U.a,{children:Object(B.jsx)(q.a,{children:Object(B.jsxs)(xe.a,{className:"auth-card",children:[Object(B.jsxs)("form",{onSubmit:function(e){e.preventDefault(),"/login"===m?(O(!0),p.a.post("/api/auth/login",Object(f.a)({},l)).then((function(e){h(e.data.token,e.data.userId),s(!0),c({message:e.data.message,status:"success"}),t(),a(e.data.userId)})).catch((function(e){O(!1),s(!0),c({message:e.message,status:"error"})}))):(O(!0),p.a.post("/api/auth/register",Object(f.a)({},l)).then((function(e){s(!0),c({message:e.data.message,status:"success"})})).catch((function(e){O(!1),s(!0),c({message:e.message,status:"error"})})))},children:[Object(B.jsxs)(ve.a,{className:"card-content",children:["/login"===m?Object(B.jsx)(F.a,{variant:"h4",component:"h4",gutterBottom:!0,children:"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"}):Object(B.jsx)(F.a,{variant:"h4",component:"h4",gutterBottom:!0,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(B.jsx)(ae.a,{required:!0,id:"email",label:"Email",name:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",onChange:g,value:l.email,fullWidth:!0,margin:"normal",size:"small"}),Object(B.jsx)(ae.a,{required:!0,id:"password",label:"Password",name:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:g,value:l.password,type:"password",fullWidth:!0,margin:"normal",size:"small"})]}),Object(B.jsx)(se.a,{className:"card-actions",children:"/login"===m?Object(B.jsx)(re.a,{variant:"contained",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"}):Object(B.jsx)(re.a,{variant:"contained",type:"submit",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]}),b&&Object(B.jsx)("div",{className:"loader-container",children:Object(B.jsx)(De.a,{})})]})})})})),Ne=function(){return Object(B.jsx)(ke,{})},ye=function(){return Object(B.jsx)(ke,{})},Se=(a(163),{MONTHS:["\u0421\u0456\u0447\u0435\u043d\u044c","\u041b\u044e\u0442\u0438\u0439","\u0411\u0435\u0440\u0435\u0437\u0435\u043d\u044c","\u041a\u0432\u0456\u0442\u0435\u043d\u044c","\u0422\u0440\u0430\u0432\u0435\u043d\u044c","\u0427\u0435\u0440\u0432\u0435\u043d\u044c","\u041b\u0438\u043f\u0435\u043d\u044c","\u0421\u0435\u0440\u043f\u0435\u043d\u044c","\u0412\u0435\u0440\u0435\u0441\u0435\u043d\u044c","\u0416\u043e\u0432\u0442\u0435\u043d\u044c","\u041b\u0438\u0441\u0442\u043e\u043f\u0430\u0434","\u0413\u0440\u0443\u0434\u0435\u043d\u044c"],WEEKDAYS_LONG:["\u041f\u043e\u043d\u0435\u0434\u0456\u043b\u043e\u043a","\u0412\u0456\u0432\u0442\u043e\u0440\u043e\u043a","\u0421\u0435\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440","\u041f'\u044f\u0442\u043d\u0438\u0446\u044f","\u0421\u0443\u0431\u043e\u0442\u0430","\u041d\u0435\u0434\u0456\u043b\u044f"],WEEKDAYS_SHORT:["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u041d\u0434"]}),Re={standard:{amount:1,price:1100,category:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442",name:"\u0414\u0432\u043e\u0445\u043c\u0456\u0441\u043d\u0438\u0439 \u043d\u043e\u043c\u0435\u0440 \u0437 \u0432\u0438\u0434\u043e\u043c \u043d\u0430 \u0433\u043e\u0440\u0438",details:"2 \u0433\u043e\u0441\u0442\u044f \xb7 1 \u0441\u043f\u0430\u043b\u044c\u043d\u044f \xb7 1 \u0434\u0432\u0443\u0445\u0441\u043f\u0430\u043b\u044c\u043d\u0435 \u043b\u0456\u0436\u043a\u043e \xb7 1 \u0441\u0430\u043d\u0432\u0443\u0437\u043e\u043b \xb7 Wi-Fi \xb7 \u0432\u0438\u0445\u0456\u0434 \u043d\u0430 \u0442\u0435\u0440\u0430\u0441\u0441\u0443 \xb7 \u0432\u0438\u0434 \u043d\u0430 \u0433\u043e\u0440\u0438",slider_photos:[a(164).default,a(165).default,a(166).default,a(167).default]},luxe:{amount:2,price:1300,category:"\u041b\u044e\u043a\u0441",name:"\u0414\u0432\u043e\u0445\u043c\u0456\u0441\u043d\u0438\u0439 \u043d\u043e\u043c\u0435\u0440 \u0437 \u0432\u0438\u0434\u043e\u043c \u043d\u0430 \u0433\u043e\u0440\u0438",details:"2-3 \u0433\u043e\u0441\u0442\u044f \xb7 1 \u0441\u043f\u0430\u043b\u044c\u043d\u044f \xb7 1 \u0434\u0432\u043e\u0441\u043f\u0430\u043b\u044c\u043d\u0435 \u043b\u0456\u0436\u043a\u043e \xb7 1 \u0441\u0430\u043d\u0432\u0443\u0437\u043e\u043b \xb7 \u0432\u0438\u0445\u0456\u0434 \u043d\u0430 \u0442\u0435\u0440\u0430\u0441\u0441\u0443 \xb7 \u0432\u0438\u0434 \u043d\u0430 \u0433\u043e\u0440\u0438",slider_photos:[a(168).default,a(169).default,a(170).default,a(171).default,a(172).default]},deluxe:{amount:3,price:1500,category:"\u0414\u0435\u043b\u044e\u043a\u0441",name:"\u0414\u0432\u043e\u0445\u043c\u0456\u0441\u043d\u0438\u0439 \u043d\u043e\u043c\u0435\u0440  \u043d\u0430 \u0434\u0440\u0443\u0433\u043e\u043c\u0443 \u043f\u043e\u0432\u0435\u0440\u0441\u0456 \u0437 \u0432\u0438\u0434\u043e\u043c \u043d\u0430 \u0433\u043e\u0440\u0438",details:"2-3 \u0433\u043e\u0441\u0442\u044f \xb7 1 \u0441\u043f\u0430\u043b\u044c\u043d\u044f \xb7 1 \u0434\u0432\u043e\u0441\u043f\u0430\u043b\u044c\u043d\u0435 \u043b\u0456\u0436\u043a\u043e \xb7 1 \u0441\u0430\u043d\u0432\u0443\u0437\u043e\u043b \xb7 \u0432\u0438\u0445\u0456\u0434 \u043d\u0430 \u0442\u0435\u0440\u0430\u0441\u0441\u0443 \xb7 \u0432\u0438\u0434 \u043d\u0430 \u0433\u043e\u0440\u0438",slider_photos:[a(173).default,a(174).default,a(175).default,a(176).default,a(177).default,a(178).default,a(179).default,a(180).default,a(181).default]}},Ie="61aa52470f00a54463f6efa8",we=a(91),Ce=(a(182),a(183),a(34));a(184);Ce.e.use([Ce.c,Ce.d,Ce.b,Ce.a]);var Ee=function(e){var t=e.availableRooms,a=e.roomType,c=Object(n.useState)(null),s=Object(o.a)(c,2),r=(s[0],s[1]),l=Object(n.useState)(null),u=Object(o.a)(l,2);u[0],u[1];return Object(n.useEffect)((function(){r(t)}),[t]),Object(B.jsxs)("div",{className:"room-list-item",children:[Object(B.jsx)("div",{className:"slider",children:Object(B.jsx)(we.a,{spaceBetween:50,slidesPerView:1,cssMode:!0,navigation:!0,pagination:!0,mousewheel:!0,keyboard:!0,children:null!==a&&Re[a].slider_photos.map((function(e,t){return Object(B.jsx)(we.b,{children:Object(B.jsx)("img",{src:e})},t)}))})}),Object(B.jsxs)("div",{className:"room-item-content",children:[Object(B.jsx)("div",{className:"category",children:Re[a].category}),Object(B.jsx)("div",{className:"name",children:Re[a].name}),Object(B.jsx)("div",{className:"details",children:Re[a].details}),Object(B.jsx)("div",{className:"price-block",children:Object(B.jsxs)("div",{className:"inner",children:[Object(B.jsxs)("b",{children:[Re[a].price," \u0433\u0440\u043d"]})," / \u043d\u0456\u0447"]})})]}),Object(B.jsx)(i.b,{to:"/room/".concat(a),className:"see-more"})]})},Me=(a(185),function(e){var t=e.availableRooms,a=e.rangeState,c=Object(n.useState)(null),s=Object(o.a)(c,2),r=s[0],i=s[1];Object(n.useEffect)((function(){i(t)}),[t]);var l=[];for(var u in r)l.push({property:u,value:r[u]});return Object(B.jsx)(B.Fragment,{children:null!==t&&null!==a.to&&Object(B.jsx)("div",{className:"available-rooms-list",children:0!==l.length&&l.map((function(e,t){return Object(B.jsx)("div",{className:"room-item-block",children:e.value>0&&Object(B.jsx)(Ee,{roomType:e.property,rangeState:a})},t)}))})})}),Ye=(a(186),Object(b.b)((function(e){return{guests:P(e)}}),(function(e){return{setGuests:function(t){return e(I(t))}}}))((function(e){var t=e.guests,a=e.setGuests,c=Object(n.useState)({adult:2,children:0}),s=Object(o.a)(c,2),r=s[0],i=s[1],l=function(e){var t=e.target.getAttribute("name");i(Object(f.a)(Object(f.a)({},r),{},Object(te.a)({},t,r[t]+1)))},u=function(e){var t=e.target.getAttribute("name");"adult"===t&&1!==r.adult&&i(Object(f.a)(Object(f.a)({},r),{},Object(te.a)({},t,r[t]-1))),"children"===t&&r.children>0&&i(Object(f.a)(Object(f.a)({},r),{},Object(te.a)({},t,r[t]-1)))};return Object(n.useEffect)((function(){a(r)}),[a,r]),Object(B.jsxs)("div",{className:"add-guests-counter",children:[Object(B.jsxs)(q.a,{className:"guests-counter-item",children:[Object(B.jsx)(F.a,{variant:"span",component:"span",className:"guests-label",children:"\u0414\u043e\u0440\u043e\u0441\u043b\u0438\u0445"}),Object(B.jsx)(V.a,{className:"minus","aria-label":"minus",onClick:function(e){return u(e)},children:Object(B.jsx)(Q.a,{name:"adult",children:"remove"})}),Object(B.jsx)("span",{className:"guests-value",children:t.adult}),Object(B.jsx)(V.a,{className:"plus","aria-label":"plus",onClick:function(e){return l(e)},children:Object(B.jsx)(Q.a,{name:"adult",children:"add"})})]}),Object(B.jsxs)(q.a,{className:"guests-counter-item",children:[Object(B.jsx)(F.a,{variant:"span",component:"span",className:"guests-label",children:"\u0414\u0456\u0442\u0435\u0439"}),Object(B.jsx)(V.a,{className:"minus","aria-label":"minus",onClick:function(e){return u(e)},children:Object(B.jsx)(Q.a,{name:"children",children:"remove"})}),Object(B.jsx)("span",{className:"guests-value",children:t.children}),Object(B.jsx)(V.a,{className:"plus","aria-label":"plus",onClick:function(e){return l(e)},children:Object(B.jsx)(Q.a,{name:"children",children:"add"})})]})]})}))),Ae=Object(b.b)((function(e){return{reservations:C(e),bookingRange:Y(e),isAuthenticated:m(e),guests:P(e)}}),(function(e){return{getReservations:function(t){return e(D(t))},setBookingRange:function(t){return e(R(t))}}}))((function(e){var t=e.reservations,a=e.getReservations,c=e.isAuthenticated,s=e.setBookingRange,r=e.bookingRange,i=e.guests,u=Object(l.h)().id,d=Object(n.useRef)(),b=Object(n.useRef)(),O=Object(n.useState)({from:null,to:null}),m=Object(o.a)(O,2),f=m[0],h=m[1],p=Object(n.useState)(null),g=Object(o.a)(p,2),x=g[0],v=g[1],D=Object(n.useState)(null),k=Object(o.a)(D,2),N=k[0],y=k[1],S=Object(n.useState)(null),R=Object(o.a)(S,2),I=R[0],w=R[1],C=Object(n.useState)(0),E=Object(o.a)(C,2),M=E[0],Y=E[1],A=Object(n.useState)(!1),P=Object(o.a)(A,2),L=P[0],T=P[1],W=Object(n.useState)(0),z=Object(o.a)(W,2),_=(z[0],z[1]),U=Object(n.useState)(0),q=Object(o.a)(U,2),H=(q[0],q[1]),G=Object(n.useState)(null),F=Object(o.a)(G,2),K=F[0],J=F[1],V=Object(n.useState)(!1),Q=Object(o.a)(V,2),X=Q[0],Z=Q[1],$=Object(n.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne={start:f.from,end:f.to};Object(n.useEffect)((function(){switch(c||a({userId:Ie,isAdmin:!1}),u){case"standard":Y(Re.standard.amount),_(Re.standard.price);break;case"luxe":Y(Re.luxe.amount),_(Re.luxe.price);break;case"deluxe":Y(Re.deluxe.amount),_(Re.deluxe.price);break;default:Y(6)}}),[c,a,u]),Object(n.useEffect)((function(){for(var e=[],a=function(a){t.filter((function(e){return t[a].start===e.start})).length>=M&&e.push(new Date(t[a].start),{after:new Date(t[a].start),before:new Date(t[a].end)})},n=0;n<t.length;n++)a(n);e.push({before:new Date}),y(e),w(e)}),[t,M]),Object(n.useEffect)((function(){null!==f.from&&w([{after:x,before:f.from}])}),[f,x]),Object(n.useEffect)((function(){if(null!==f.to){w(N);var e=Math.round(Math.abs((f.from-f.to)/864e5));H(e);var a=t.filter((function(e){return j()(f.from).isBetween(j()(e.start),j()(e.end),void 0,"[]")&&j()(f.to).isBetween(j()(e.start),j()(e.end),void 0,"[]")}));console.log(a);for(var n={standard:Re.standard.amount,luxe:Re.luxe.amount,deluxe:Re.deluxe.amount},c=0;c<a.length;c++)"standard"===a[c].roomType&&0!==n.standard&&(n.standard=n.standard-1),"luxe"===a[c].roomType&&0!==n.luxe&&(n.luxe=n.luxe-1),"deluxe"===a[c].roomType&&0!==n.deluxe&&(n.deluxe=n.deluxe-1);J(n),Z(!1),s(f)}}),[f.to]),Object(n.useEffect)((function(){T(!0)}),[I]),Object(n.useEffect)((function(){h(r)}),[r]),Object(n.useEffect)((function(){var e=function(e){d.current&&X&&!d.current.contains(e.target)&&(Z(!1),ae(!1)),b.current&&te&&!b.current.contains(e.target)&&(Z(!1),ae(!1))};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[X,te]);var ce=function(){w(N)};return Object(B.jsx)("div",{className:"view-container",children:L?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("div",{className:"booking-main-title",children:"\u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0456\u0441\u0442\u044c \u043d\u043e\u043c\u0435\u0440\u0456\u0432"}),Object(B.jsxs)("div",{className:"booking-dates-line",children:[Object(B.jsx)("div",{className:"choose-dates-label",children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0434\u0430\u0442\u0438"}),Object(B.jsxs)("div",{className:"dates-container ".concat(X?"opened":""),ref:d,children:[Object(B.jsx)(re.a,{variant:null!==f.to?"contained":"outlined",className:"primary-btn",onClick:function(){return Z((function(e){return!e}))},children:null!==f.from&&null!==f.to?"".concat(j()(f.from).format("DD.MM.YY")," - ").concat(j()(f.to).format("DD.MM.YY")):"\u0417\u0430\u0457\u0437\u0434 - \u0412\u0438\u0457\u0437\u0434"}),Object(B.jsxs)("div",{className:"dates-calendar",children:[Object(B.jsx)(le.a,{mode:"range",locale:"ua",months:Se.MONTHS,weekdaysLong:Se.WEEKDAYS_LONG,weekdaysShort:Se.WEEKDAYS_SHORT,numberOfMonths:2,fromMonth:new Date,disabledDays:null!==I?I:N,selectedDays:f,modifiers:ne,onDayClick:function(e,t){var a=t.disabled;if(e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),a)ce();else{h({from:null,to:null});for(var n=0;n<I.length;n++)I[n]>e&&v(I[n]);var c=ie.DateUtils.addDayToRange(e,f);null!==f.from&&null!==f.to||h(c)}}}),Object(B.jsxs)("div",{className:"actions-block",children:[Object(B.jsx)(re.a,{variant:"text",color:"error",onClick:function(){return Z(!1)},children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"}),Object(B.jsx)(re.a,{variant:"text",onClick:function(){return Z(!1)},children:"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"})]})]})]}),Object(B.jsxs)("div",{className:"guests-container ".concat(te?"opened":""),ref:b,children:[Object(B.jsx)(re.a,{variant:"contained",className:"primary-btn",onClick:function(){return ae((function(e){return!e}))},children:i.adult+i.children===1?"".concat(i.adult+i.children," \u0433\u043e\u0441\u0442\u044c"):"".concat(i.adult+i.children," \u0433\u043e\u0441\u0442\u0435\u0439")}),Object(B.jsxs)("div",{className:"guests-calendar",children:[Object(B.jsx)(Ye,{}),Object(B.jsxs)("div",{className:"actions-block",children:[Object(B.jsx)(re.a,{variant:"text",color:"error",onClick:function(){return ae(!1)},children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"}),Object(B.jsx)(re.a,{variant:"text",onClick:function(){return ae(!1)},children:"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438"})]})]})]})]}),Object(B.jsx)(Me,{availableRooms:K,rangeState:f})]}):Object(B.jsx)("div",{children:"Loading..."})})})),Pe=Object(b.b)((function(e){return{reservations:C(e),bookingRange:Y(e),isAuthenticated:m(e)}}),(function(e){return{getReservations:function(t){return e(D(t))}}}))((function(e){var t=e.reservations,a=e.getReservations,c=e.isAuthenticated,s=e.bookingRange,r=Object(l.h)().id,u={from:null,to:null},d=Object(n.useState)(u),b=Object(o.a)(d,2),O=b[0],m=b[1],f=Object(n.useState)(null),h=Object(o.a)(f,2),p=h[0],g=h[1],x=Object(n.useState)(null),v=Object(o.a)(x,2),D=v[0],k=v[1],N=Object(n.useState)(null),y=Object(o.a)(N,2),S=y[0],R=y[1],I=Object(n.useState)(0),w=Object(o.a)(I,2),C=w[0],E=w[1],M=Object(n.useState)(!1),Y=Object(o.a)(M,2),A=Y[0],P=Y[1],L=Object(n.useState)(0),T=Object(o.a)(L,2),W=T[0],z=T[1],_=Object(n.useState)(0),U=Object(o.a)(_,2),q=U[0],H=U[1],G={start:O.from,end:O.to};Object(n.useEffect)((function(){m(s)}),[s]),Object(n.useEffect)((function(){switch(c||a({userId:Ie,roomType:r,isAdmin:!1}),r){case"standard":E(Re.standard.amount),z(Re.standard.price);break;case"luxe":E(Re.luxe.amount),z(Re.luxe.price);break;case"deluxe":E(Re.deluxe.amount),z(Re.deluxe.price)}}),[c,a,r]),Object(n.useEffect)((function(){for(var e=[],a=function(a){var n=t.filter((function(e){return e.start===t[a].start}));console.log(n.length),n.length>=C&&e.push(new Date(t[a].start),{after:new Date(t[a].start),before:new Date(t[a].end)})},n=0;n<t.length;n++)a(n);e.push({before:new Date}),k(e),R(e)}),[t]),Object(n.useEffect)((function(){O.from&&R([{after:p,before:O.from}])}),[O,p]),Object(n.useEffect)((function(){R(D);var e=Math.round(Math.abs((O.from-O.to)/864e5));H(e)}),[O.to]),Object(n.useEffect)((function(){P(!0)}),[S]);var F=function(){R(D)};return Object(B.jsx)("div",{className:"view-container",children:A?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(le.a,{mode:"range",locale:"ua",months:Se.MONTHS,weekdaysLong:Se.WEEKDAYS_LONG,weekdaysShort:Se.WEEKDAYS_SHORT,numberOfMonths:2,fromMonth:new Date,disabledDays:null!==S?S:D,selectedDays:O,modifiers:G,onDayClick:function(e,t){var a=t.disabled;if(e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),a)F();else{m(u);for(var n=0;n<S.length;n++)S[n]>e&&g(S[n]);var c=ie.DateUtils.addDayToRange(e,O);null!==O.from&&null!==O.to||m(c)}}}),Object(B.jsx)("div",{className:"preview-col",children:Object(B.jsxs)("div",{className:"preview-block",children:[Object(B.jsxs)("div",{className:"dates",children:[Object(B.jsxs)("div",{className:"arrival",children:[Object(B.jsx)("div",{className:"label",children:"\u0414\u0430\u0442\u0430 \u0437\u0430\u0457\u0437\u0434\u0443"}),Object(B.jsx)("div",{className:"value",children:null!==O.from?j()(O.from).format("DD.MM.YY"):"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0434\u0430\u0442\u0443"})]}),Object(B.jsxs)("div",{className:"arrival",children:[Object(B.jsx)("div",{className:"label",children:"\u0414\u0430\u0442\u0430 \u0432\u0438\u0457\u0437\u0434\u0443"}),Object(B.jsx)("div",{className:"value",children:null!==O.to?j()(O.to).format("DD.MM.YY"):"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0434\u0430\u0442\u0443"})]})]}),null!==O.to&&Object(B.jsxs)("div",{className:"pricing-list",children:[Object(B.jsxs)("div",{className:"pricing-list-item",children:[Object(B.jsx)("div",{className:"subtotal",children:"UAH ".concat(W," x ").concat(q," \u043d\u043e\u0447\u0456")}),Object(B.jsx)("div",{className:"total",children:"UAH ".concat(W*q)})]}),Object(B.jsxs)("div",{className:"pricing-list-item total-item",children:[Object(B.jsx)("div",{className:"subtotal",children:"\u0417\u0430\u0433\u0430\u043b\u043e\u043c"}),Object(B.jsx)("div",{className:"total",children:"UAH ".concat(W*q)})]})]})]})}),null!==s.to&&Object(B.jsx)(i.b,{to:"/checkout?checkin=".concat(j()(s.from).format("DD-MM-YY"),"&checkout=").concat(j()(s.to).format("DD-MM-YY")),children:"Checkout"})]}):Object(B.jsx)("div",{children:"Loading..."})})})),Le=Object(b.b)((function(e){return{reservations:C(e),range:E(e),userId:O(e)}}),(function(e){return{addReservation:function(t){return e(k(t))}}}))((function(e){var t=e.addReservation,a=e.range,c=e.userId,s=e.roomType,r=e.roomPrice,i=Object(n.useState)({name:"",email:"",descr:"",phone:"",start:null,end:null,title:"",owner:c,roomType:s,roomPrice:r,paymentStatus:!1}),l=Object(o.a)(i,2),u=l[0],d=l[1],b=Object(n.useState)(!1),O=Object(o.a)(b,2),m=O[0],h=O[1];Object(n.useEffect)((function(){d(Object(f.a)(Object(f.a)({},u),{},{start:a.start,end:a.end}))}),[a]);var p=function(){return h(!1)},g=function(e){"name"===e.target.name?d(Object(f.a)(Object(f.a)({},u),{},{name:e.target.value,title:e.target.value})):d(Object(f.a)(Object(f.a)({},u),{},Object(te.a)({},e.target.name,e.target.value))),"paymentStatus"===e.target.name&&d(Object(f.a)(Object(f.a)({},u),{},{paymentStatus:e.target.checked}))};return Object(B.jsxs)("div",{className:"add-reservation-container",children:[Object(B.jsx)(F.a,{variant:"h6",component:"h6",sx:{marginBottom:"6px"},children:"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u0442\u044b"}),Object(B.jsx)(F.a,{variant:"p",component:"p",sx:{marginBottom:"20px"},className:"secondary-descr",children:"".concat(j()(a.start).format("DD.MM.YY")," - ").concat(j()(a.end).format("DD.MM.YY"))}),Object(B.jsx)(re.a,{fullWidth:!0,onClick:function(){h(!0)},variant:"contained",endIcon:Object(B.jsx)(Q.a,{children:"add"}),children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0431\u0440\u043e\u043d\u044c"}),Object(B.jsx)(ee.a,{open:m,onClose:p,children:Object(B.jsxs)(q.a,{className:"modal-content",children:[Object(B.jsx)(V.a,{className:"close","aria-label":"close",onClick:p,children:Object(B.jsx)(Q.a,{children:"close"})}),Object(B.jsxs)(F.a,{variant:"p",component:"p",className:"secondary-descr",sx:{marginBottom:"20px"},children:["\u041d\u0430 \u0434\u0430\u0442\u044b"," ","".concat(j()(a.start).format("DD.MM.YY")," - ").concat(j()(a.end).format("DD.MM.YY"))]}),Object(B.jsxs)(q.a,{className:"reservation-edit-form",children:[Object(B.jsx)(ae.a,{required:!0,id:"name",label:"\u0418\u043c\u044f \u0433\u043e\u0441\u0442\u044f",name:"name",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0433\u043e\u0441\u0442\u044f",onChange:g,value:u.name,fullWidth:!0,margin:"normal",size:"small",InputLabelProps:{shrink:!0}}),Object(B.jsx)(ae.a,{required:!0,id:"email",label:"Email",name:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u044d\u043c\u0435\u0439\u043b",onChange:g,value:u.email,type:"email",fullWidth:!0,margin:"normal",size:"small",InputLabelProps:{shrink:!0}}),Object(B.jsx)(ae.a,{required:!0,id:"phone",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",name:"phone",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d",onChange:g,value:u.phone,fullWidth:!0,margin:"normal",size:"small",InputLabelProps:{shrink:!0}}),Object(B.jsx)(ae.a,{id:"details",label:"\u0414\u0435\u0442\u0430\u043b\u0438",name:"descr",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0435\u0442\u0430\u043b\u0438 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",onChange:g,value:u.descr,fullWidth:!0,margin:"normal",size:"small",multiline:!0,minRows:4,InputLabelProps:{shrink:!0}}),Object(B.jsxs)(q.a,{className:"price-and-payment",children:[Object(B.jsx)(ae.a,{required:!0,id:"price",label:"\u0426\u0435\u043d\u0430 \u0437\u0430 \u043d\u043e\u0447\u044c",name:"roomPrice",placeholder:"1300",onChange:g,value:u.roomPrice,type:"number",margin:"normal",size:"small",InputLabelProps:{shrink:!0}}),Object(B.jsx)(ne.a,{className:"prepayment-checkbox",control:Object(B.jsx)(ce.a,{name:"paymentStatus",onChange:g}),label:"\u041f\u0440\u0435\u0434\u043e\u043f\u043b\u0430\u0442\u0430"})]}),Object(B.jsxs)(se.a,{className:"card-actions",children:[Object(B.jsx)("div",{}),Object(B.jsx)(re.a,{variant:"contained",onClick:function(){t(u),h(!1)},children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})]})]})]})})]})})),Te=function(e){return e.isAuthenticated?Object(B.jsx)(c.a.Fragment,{children:Object(B.jsxs)(l.d,{children:[Object(B.jsx)(l.b,{path:"/calendar",exact:!0,element:Object(B.jsx)(Oe,{})}),Object(B.jsx)(l.b,{path:"/calendar/:id",exact:!0,element:Object(B.jsx)(be,{})}),Object(B.jsx)(l.b,{path:"/login",element:Object(B.jsx)(l.a,{replace:!0,to:"/calendar"})}),Object(B.jsx)(l.b,{path:"/register",element:Object(B.jsx)(l.a,{replace:!0,to:"/calendar"})}),Object(B.jsx)(l.b,{path:"/booking/:id",element:Object(B.jsx)(l.a,{replace:!0,to:"/calendar/:id"})}),Object(B.jsx)(l.b,{path:"/",element:Object(B.jsx)(l.a,{replace:!0,to:"/calendar"})})]})}):Object(B.jsx)(c.a.Fragment,{children:Object(B.jsxs)(l.d,{children:[Object(B.jsx)(l.b,{path:"/",element:Object(B.jsx)(Ae,{})}),Object(B.jsx)(l.b,{path:"/room/:id",element:Object(B.jsx)(Pe,{})}),Object(B.jsx)(l.b,{path:"/checkout",element:Object(B.jsx)(Le,{})}),Object(B.jsx)(l.b,{path:"/login",exact:!0,element:Object(B.jsx)(Ne,{})}),Object(B.jsx)(l.b,{path:"/register",exact:!0,element:Object(B.jsx)(ye,{})})]})})},We=(a(187),a(266)),ze=a(267),Be=Object(b.b)(null,(function(e){return{setIsAuthenticated:function(t){return e(fe(t))}}}))((function(e){var t=e.setIsAuthenticated,a=ge().logout;return Object(B.jsx)(q.a,{children:Object(B.jsx)(We.a,{position:"static",children:Object(B.jsxs)(ze.a,{children:[Object(B.jsx)(F.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(B.jsx)(i.b,{to:"/calendar",className:"brand-logo",children:"Agora bookings"})}),Object(B.jsx)(re.a,{color:"inherit",onClick:function(){a(),t(!1)},children:"Logout"})]})})})})),_e=a(244),Ue=a(241),qe=function(e){return e.snackbar.snackbarData.message},He=function(e){return e.snackbar.snackbarData.status},Ge=function(e){return e.snackbar.snackbarData.isOpened},Fe=Object(b.b)((function(e){return{isOpened:Ge(e),message:qe(e),status:He(e)}}),(function(e){return{setIsOpened:function(t){return e(G(t))}}}))((function(e){var t=e.isOpened,a=e.message,n=e.status,c=e.setIsOpened,s=function(){c(!1)};return Object(B.jsx)(_e.a,{open:t,autoHideDuration:6e3,onClose:s,message:a,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(B.jsx)(Ue.a,{onClose:s,severity:n,sx:{width:"100%"},children:a})})}));var Ke,Je,Ve,Qe=Object(b.b)((function(e){return{isAuthenticated:m(e)}}),(function(e){return{setIsAuthenticated:function(){return e(fe(!0))},setUserId:function(t){return e(he(t))}}}))((function(e){var t=e.isAuthenticated,a=e.setIsAuthenticated,s=e.setUserId,r=ge(),l=r.token,o=r.userId;return Object(n.useEffect)((function(){l&&null!==o&&(a(),s(o))}),[l,a,o,s]),Object(B.jsxs)(c.a.Fragment,{children:[Object(B.jsxs)(i.a,{children:[t&&Object(B.jsx)(Be,{}),Object(B.jsx)(Te,{isAuthenticated:t})]}),Object(B.jsx)(Fe,{})]})})),Xe=a(16),Ze=a(41),$e=Object(g.c)({isAuthenticated:!1,userId:""},(Ke={},Object(te.a)(Ke,me.setIsAuthenticated,(function(e,t){var a=t.payload;return Object(f.a)(Object(f.a)({},e),{},{isAuthenticated:a})})),Object(te.a)(Ke,me.setUserId,(function(e,t){var a=t.payload;return Object(f.a)(Object(f.a)({},e),{},{userId:a})})),Ke)),et=Object(Ze.b)({userData:$e}),tt={reservations:[],disabledDates:[],range:{start:new Date,end:new Date},reservationsState:0,editedRange:{from:null,to:null},bookingRange:{from:null,to:null},guests:{adult:2,children:0}},at=Object(g.c)(tt,(Je={},Object(te.a)(Je,x.getReservations,(function(e,t){var a=t.payload;return Object(f.a)(Object(f.a)({},e),{},{reservations:a})})),Object(te.a)(Je,x.getDisabledDates,(function(e,t){var a=t.payload;return Object(f.a)(Object(f.a)({},e),{},{disabledDates:a})})),Object(te.a)(Je,x.addReservation,(function(e,t){var a=t.payload;return Object(f.a)(Object(f.a)({},e),{},{reservations:[].concat(Object(Xe.a)(e.reservations),[a])})})),Object(te.a)(Je,x.deleteReservation,(function(e,t){var a=t.payload;return Object(f.a)(Object(f.a)({},e),{},{reservations:e.reservations.filter((function(e){return e._id!==a}))})})),Object(te.a)(Je,x.updateReservation,(function(e,t){var a=t.payload;return Object(f.a)(Object(f.a)({},e),{},{reservations:Object(Xe.a)(e.reservations.map((function(e){return e._id===a._id?a:e})))})})),Object(te.a)(Je,x.updateReservationsCount,(function(e,t){var a=t.payload;return Object(f.a)(Object(f.a)({},e),{},{reservationsState:a+1})})),Object(te.a)(Je,x.setRange,(function(e,t){var a=t.payload;return Object(f.a)(Object(f.a)({},e),{},{range:a})})),Object(te.a)(Je,x.setEditedRange,(function(e,t){var a=t.payload;return Object(f.a)(Object(f.a)({},e),{},{editedRange:a})})),Object(te.a)(Je,x.setBookingRange,(function(e,t){var a=t.payload;return Object(f.a)(Object(f.a)({},e),{},{bookingRange:a})})),Object(te.a)(Je,x.setGuests,(function(e,t){var a=t.payload;return Object(f.a)(Object(f.a)({},e),{},{guests:a})})),Je)),nt=Object(Ze.b)({calendarData:at}),ct=Object(g.c)({message:"",status:"success",isOpened:!1},(Ve={},Object(te.a)(Ve,v.getData,(function(e,t){var a=t.payload;return Object(f.a)(Object(f.a)({},e),{},{message:a.message,status:a.status})})),Object(te.a)(Ve,v.setIsOpened,(function(e,t){var a=t.payload;return Object(f.a)(Object(f.a)({},e),{},{isOpened:a})})),Ve)),st=Object(Ze.b)({snackbarData:ct}),rt=Object(g.a)({reducer:{user:et,calendar:nt,snackbar:st},middleware:Object(Xe.a)(Object(g.d)({serializableCheck:!1})),devTools:!1});r.a.render(Object(B.jsx)(b.a,{store:rt,children:Object(B.jsx)(Qe,{})}),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.32c3b531.chunk.js.map